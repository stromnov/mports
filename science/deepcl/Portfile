# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 140315 2015-09-17 08:29:01Z stromnov@macports.org $

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cmake 1.0

github.setup        hughperkins DeepCL 8.2.1 v

name                deepcl
categories          science math devel
platforms           darwin
license             MPL

maintainers         stromnov openmaintainer

description         OpenCL library to train deep convolutional neural networks
long_description    ${description}

checksums           rmd160  9de2f9af32457aba221e58e22c7c1f75e7bec5de \
                    sha256  a4cf10d5d7ac62947de1abd37f01e8cc16cb8343cd920003be6f76e77c824106

depends_lib-append  port:easycl \
                    port:clblas \
                    port:jpeg

patchfiles-append   patch-CMakeLists.txt.diff \
                    patch-cmake_build_EasyCL.cmake.diff \
                    patch-cmake_build_clBLAS.cmake.diff

post-patch {
    reinplace "s|@cmake_share_module_dir@|${cmake_share_module_dir}|g" ${worksrcpath}/CMakeLists.txt
}

cmake.out_of_source yes
