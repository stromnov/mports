From b0f81c6a2fbe111a96e297d1d1c03894d9acbce6 Mon Sep 17 00:00:00 2001
From: Matthias Bussonnier <bussonniermatthias@gmail.com>
Date: Wed, 8 Jun 2016 11:39:53 -0700
Subject: [PATCH] Fix crash dusing completion on PTK 1.0.0

Closes #9579
Closes #9578
---
 IPython/terminal/ptshell.py | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/IPython/terminal/ptshell.py b/IPython/terminal/ptshell.py
index 0f8bcf5..24aad2e 100644
--- IPython/terminal/ptshell.py
+++ IPython/terminal/ptshell.py
@@ -183,8 +183,9 @@ def _(event):
             d = b.document
 
             if b.complete_state:
-                cs = b.complete_state
-                b.apply_completion(cs.current_completion)
+                cc = b.complete_state.current_completion
+                if cc:
+                    b.apply_completion(cc)
                 return
 
             if not (d.on_last_line or d.cursor_position_row >= d.line_count
